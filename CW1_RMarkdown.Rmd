---
title: 'GY7702: Coursework 1'
author: "James A. Hardwick (179001497)"
date: "04/11/2020"
output: pdf_document
---
# Introduction 
This document has been created to increase the **reproducibility** of this coursework 
assignment, written in RMarkdown. To support the reproducibility of the document
please refer to the *[GitHub data repository](https://github.com/Jah109/GY7702_CW1.git)*
for the commits that document the development of this Coursework 1

## Libraries 
This coursework use the library **tidyverse**
```{r message = FALSE, warning = FALSE}
library(tidyverse)
```
Also the library **knitr**
```{r message = FALSE, warning = FALSE}
library(knitr)
```

Other libraries are also used for specific question for instance in question 2 the library **palmerpenguins** these specific libraries will be referred to within each question  

**## Questions** 

**### Question 1:** 
Question 1 deals with a vector of 25 numbers between 1 and 7, with each value representing answers to survey questions. Some values are missing. Vector was defined by the question: 

```{r message = FALSE, warning = FALSE}
# vector survey_responses contains 25 elements 
survey_responses <- c(NA, 3, 4, 4, 5, 2, 4, NA, 6, 3, 5, 4, 0, 5, 7, 5, NA, 5, 
                      2, 4, NA, 3, 3, 5, NA)
```

#### Question 1.1:

```{r message = FALSE, warning = FALSE}
# specify the survey_response variable 
survey_responses %>%
  # using na.omit removes NA values from the vector 
  na.omit() %>%
  # is. element will return logical output, if 7 or completely agree was answered in the 
  # survey it will be returned as TRUE 
  is.element(7) %>%
  # is. element will return logical output, if 1 or completely agree was answered in the 
  # survey it will be returned as TRUE
  is.element(1)
```
#### Question 1.2
Extract the indexes who at least somewhat agreed or more (values 5 to 7)

```{r message = FALSE, warning = FALSE}
# Function which see if any value between 5 and 7 and return the index of each 
# survey participant 
which(survey_responses %in% 5:7)
```

**###Question 2:**
Question 2 looks data from AdÃ©lie, Chinstrap, and Gentoo penguins observed on islands in the Palmer Archipelago near Palmer Station, Antarctica. Palmerpenguins library can be found at *[Palmerpenguins GitHub Repositry](https://github.com/allisonhorst/palmerpenguins.git)*

#### Question 2.1
Question 2.1 ask for the library (palmerpenguins) to be installed and loaded 
```{r message = FALSE, warning = FALSE}
library(tidyverse)
library(knitr)
# install.packages("palmerpenguins")
library(palmerpenguins)
```

#### Question 2.2
Question 2.2 creates a table showing *species, island, bill length and body mass* of the 10 Gentoo penguins in the penguins table with the highest body mass
```{r message = FALSE, warning = FALSE}
# Starts from the entire palmerpenguins libraries  
palmerpenguins::penguins %>%
  # Selects only the necessary columns
  dplyr::select(species, island, bill_length_mm, body_mass_g
  ) %>%
  # Retain only rows representing the Gentoo species 
  dplyr::filter(species == "Gentoo"
  ) %>%
  # Sort by descending body mass in g
  dplyr::arrange(desc(body_mass_g)) 
```

#### Question 2.3 
Question 2.3 creates a table with *average bill length per island*, ordered by *average bill length*
```{r message = FALSE, warning = FALSE}
# Starts from the entire palmerpenguins libraries  
palmerpenguins::penguins %>%
  # Selects only the necessary columns
  dplyr::select(bill_length_mm, island) %>%
  # Grouped by island
  dplyr::group_by(island) %>%
  # Drops rows containing NAs in the bill_length_mm column
  # otherwise the mean function will return NA
  dplyr::filter(!is.na(bill_length_mm)) %>%
  # Calculates the average of bill_length_mm
  dplyr::summarise(average_bill_length = mean(bill_length_mm)) %>%
  # Ordered by descending average_bill_length
  dplyr::arrange(desc(average_bill_length)) %>%
  # kable improves tibble format 
  knitr::kable()
```

#### Question 2.4 
Question 2.4 creates a table showing the *minimum, median and maximum* proportion between *bill length and bill depth by species* 
```{r message = FALSE, warning = FALSE}
# Starts from the entire palmerpenguins libraries 
palmerpenguins::penguins %>%
  # Selects only the necessary columns
  dplyr::select(species, bill_length_mm, bill_depth_mm) %>%
  # Grouped by species
  dplyr::group_by(species) %>%
  # Drops rows containing NAs in the bill_length_mm column
  # otherwise the mean function will return NA
  dplyr::filter(!is.na(bill_length_mm))%>%
  # Drops rows containing NAs in the bill_depth_mm column
  # otherwise the mean function will return NA
  dplyr::filter(!is.na(bill_depth_mm)) %>%
  # Calculates the bill length to bill depth ratio 
  dplyr::summarise(Proportion= 
                     (bill_length_mm/bill_depth_mm)) %>%
   # using summariase again the minimum, median and maximum for each species can be calculated 
  dplyr::summarise(min(Proportion), 
                   median(Proportion),
                   max(Proportion)) %>%
  # Using the function kable formats the table 
  knitr::kable()
```


**### Question 3:**

Question 3 looks at a topical data set of new and cumulative **COVD19** cases in the UK between March 1st and October 17th 2020. **COVID19** data is sourced from the [HM Government Coronavirus in the UK](https://coronavirus-staging.data.gov.uk/details/cases) 

#### Question 3.1
Question 3.1 asks for the data covid19 cases to be loaded  

```{r message = FALSE, warning = FALSE}
#using readr (part of tidyverse)
library(readr)
# reads the .CSV file with the correct directory
# Imports covid19_cases_20200301_20201017.csv and assings to a new variable
#covid_data 
covid_data <-readr::read_csv("covid19_cases_20200301_20201017.csv")
```

#### Question 3.2
This question asked for an area specific table to be generated. Here **Brentwood** (Essex) COVID19 is 
presented. 
Brentwood Borough Council (COVID19 response and information)[https://www.brentwood.gov.uk/index.php?cid=2937] 

```{r message = FALSE, warning = FALSE}
# create a complete table containing a row for each day and area, replace Na
# with the value available for the previous date
# Resulting table will be stored in the new variable 
# brentwood_complete_covide_data 
Brentwood_complete_covid_data_a <-covid_data %>%
  #selects extracts wanted columns 
  dplyr::select(specimen_date, area_name, newCasesBySpecimenDate, 
                cumCasesBySpecimenDate)%>%
  # group by specimen_data & area_name leads to each area_name having a row 
  # per specimen data  
  dplyr::group_by(specimen_date, area_name) %>%
  # tidyr :: fill replace NA values with the values from the previous row 
  # default direction is down
  tidyr::fill(newCasesBySpecimenDate, cumCasesBySpecimenDate) %>%
  # replace_na replaces any remaining NA with 0 
  tidyr::replace_na()%>%
  # dplyr :: filter subsets the area_name to Bentwood 
  dplyr::filter(area_name == "Brentwood")%>%
  # converting to a data.frame as initially when trying to drop area_name using
  # dplyr::select (-area_number) got an error message 'adding missing grouping 
  # variables error: area_number so I converted it to a data frame
  data.frame()%>%
  # then drop area_name using select 
  dplyr::select(-area_name) %>%
  # Then converted back to a tibble 
  as_tibble()
```

#### Question 3.3
# load library lubridate

```{r message = FALSE, warning = FALSE}
library("lubridate")
```


```{r message = FALSE, warning = FALSE}
# start from copy Brentwood_day_before 
Brentwood_day_before <- Brentwood_complete_covid_data %>%
  # mutate specimen_date using lubridate 
  # format of ymd is specified then - 1 day 
  # as.character converts date into character string 
 dplyr::mutate(day_before = as.character(ymd(specimen_date - 1 ))) %>%
  # drop specimen_date and cumCasesBySpecimenDate columns 
  dplyr::select(-specimen_date, -cumCasesBySpecimenDate) %>%
  # Rename newCasesBySpecimenDate to newCases_day_before 
  dplyr::rename(newCases_day_before = newCasesBySpecimenDate) %>%
  # join Brentwood_day_before with Brentwood_complete_covid_data
  # where specimen_date is equal to day_before using inner_join
```

#### Question 3.4

**### Question 4**



